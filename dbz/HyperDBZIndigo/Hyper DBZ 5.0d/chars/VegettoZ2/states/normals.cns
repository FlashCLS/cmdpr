;==============================================================
; CNS File for Vegetto Z2 by Balthazar & XGargoyle
; Normal states : standing, crouching & jumping basics, etc.
;==============================================================

; TAUNT
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S

[State 0, VelSet]
type=velset
trigger1=1
x=8*sin(time*0.5)
y=-4*cos(time*0.9)
ignorehitpause=1
persistent=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%6=0
value = 100,10+random%2
volumescale = 255
channel = 2
lowpriority = 1
;ignorehitpause =
;persistent =

[State -2, Dust]
type = Explod
;triggerall = !NumExplod(196)
triggerall = NumHelper(90000005)
trigger1 = time%6=0
anim = 196
ID = 196
postype=left
pos = floor(ScreenPos X), floor(Helper(90000005),screenpos Y)
facing = facing
bindtime = 1
removetime = -2
sprpriority = -10
;scale = 0.3,0.3


[State 195, ChangeState]
type = ChangeState
trigger1 = time>60
value = 0
ctrl = 1

; S. LIGHT PUNCH
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4*sin(time*0.15)
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelemtime(1)=4
value = 0, 0
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelemtime(1)=4 && random<200
value = 3,random%5
channel = 0
volumescale = 300
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
;damage = 20, 0
damage = ceil(cond(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 0
animtype = light
guardflag = MA
hitflag = MAF
affectteam = E
priority = 2, Hit
pausetime = 10,16 ;10
guard.pausetime = 10,12 ;10
sparkno = s7010
guard.sparkno = s7000
sparkxy = 0,0 ;-20,-58
hitsound = s5, 0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 7
ground.hittime  = 7
ground.velocity = -2.5 ;-3
guard.velocity = -4.5
airguard.velocity = -1.9,-.8
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= 40,35
givepower = 35,35
yaccel = 0.5
ID = 1098
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(2)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

; S. MEDIUM PUNCH
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4*sin(time*0.12)
y=-1*cos(time*0.12)
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelemtime(1)=7
value = 0, 0
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelemtime(1)=7 && random<200
value = 3,10+random%4
channel = 0
volumescale = 300
persistent = 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype = Medium
damage = ceil(cond(fvar(11) * 42 < 7, 7, fvar(11) * 42)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,0 ;-20,-65
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.type = High
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(2)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = NumExplod(987654321)
trigger2 = pos Y > var(3)
trigger2 = AnimElemTime(3)>=0
trigger3 = time>30
value = 0
ctrl = 1


; S. STRONG PUNCH
[Statedef 220]
type = S
movetype = A
physics = S
anim = 220
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4.3*sin(time*0.11)
y=4.3*cos(time*0.11)
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelemtime(2)=0
trigger2 = animelemtime(4)=0
value = 0, 2

[State 200, snd]
type = playsnd
trigger1 = animelemtime(2)=0 && random<200
value = 3,20+random%4
channel = 0
volumescale = 300
persistent = 0

;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =


[State 200, 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
damage = ceil(cond(fvar(11) * 32 < 7, 7, fvar(11) * 32)), 0
animtype = Hard
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 15,17 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
air.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098
nochainID = 1030
fall.envshake.ampl = id
persistent = 0
[State 200, 1] ;non-launcher if standing
type = HitDef
trigger1 = animelem = 4
attr = S, NA
damage = ceil(cond(fvar(11) * 33 < 7, 7, fvar(11) * 33)), 0
animtype = High
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 15,17 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound = s5, 2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= 0,0
givepower = 0,0
yaccel = 0.5
ID = 1098
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(5)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = NumExplod(987654321)
trigger2 = pos Y < var(3)
trigger2 = AnimElemTime(5)>=0
trigger3 = time>30
value = 0
ctrl = 1

; S. LIGHT KICK
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
;x=6*sin(time*0.15)
;y=8*sin(time*0.15)
x=4.3*sin(time*0.33)
y=6.4*sin(time*0.33)
ignorehitpause=1
persistent=1

;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 230, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 0
persistent = 0

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = Light
;damage    = 25,0
damage = ceil(cond(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 0
priority = 4, Hit
guardflag = MA
affectteam = E
pausetime = 10,18
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2.5
guard.velocity = -4.5
air.velocity = -2,-3
air.animtype = back
getpower= 40,35
givepower = 35,35
yaccel = 0.5
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 230, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = NumExplod(987654321)
trigger2 = pos Y < var(3)
trigger2 = AnimElemTime(3)>=0
trigger3 = time>19
value = 0
ctrl = 1

; S. MEDIUM KICK
[Statedef 240]
type = S
movetype = A
physics = S
anim = 240
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4*sin(time*0.11)
y=3*cos(time*0.15)
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,10+random%4
channel = 0
volumescale = 300
persistent = 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype = Medium
;damage = 35,0
damage = ceil(cond(fvar(11) * 44 < 7, 7, fvar(11) * 44)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 19
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,1
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 12;8
ground.hittime  = 12;8
ground.velocity = -4
guard.velocity = -6
air.velocity = -4,-3
airguard.velocity = -3,-1.1
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 240, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = NumExplod(987654321)
trigger2 = pos Y < var(3)
trigger2 = AnimElemTime(3)>=0
trigger3 = time>40
value = 0
ctrl = 1

; S. STRONG KICK
[Statedef 250]
type = S
movetype = A
physics = S
anim = 250
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
;x=3*sin(time*0.11)
;y=-5*cos(time*0.09)
x=3.5*sin(time*0.08)
y=-4*cos(time*0.1)
ignorehitpause=1
persistent=1


;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = AnimElem=2 ;1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 241, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 2
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,20+random%4
channel = 0
volumescale = 300
persistent = 0

[State 255, hit]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Hard
damage = ceil(cond(fvar(11) * 58 < 7, 7, fvar(11) * 58)), 0
priority = 4, Hit
hitflag = MA
guardflag = MA
affectteam = E
pausetime = 13,17
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -6
air.velocity = -3,-3
air.animtype = back
getpower= cond(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
fall = 0
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 255, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = NumExplod(987654321)
trigger2 = pos Y > var(3)
trigger2 = AnimElemTime(3)>=0
trigger3 = time>40
value = 0
ctrl = 1

; DASH KICK
[Statedef 350]
type = A
movetype = A
physics = N
ctrl = 0
poweradd = 0
juggle = 7
velset = 2.2*const(velocity.run.fwd.x),0
hitcountpersist = 1
;movehitpersist = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 350
ignorehitpause = 1
;persistent =

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 0, 2
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 6 ;&& random<200
value = 3,20+random%4
channel = 0
volumescale = 300
persistent = 0

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemTime(2)>=0
x = 0.6
;ignorehitpause = 1
;persistent =

[State 240, 2]
type = HitDef
trigger1 = animelem = 6
attr = A, NA
animtype = Hard
damage = ceil(cond(fvar(11) * 70 < 7, 7, fvar(11) * 70)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,20
hitsound   = s5,2
guardsound = S6,2
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1 ;(NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(7)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 255, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = time>35 ;40
value = 0 + 50*(prevstateno=[110,111])
ctrl = 1

; C. STRONG PUNCH
[Statedef 420]
type = C;S
movetype = A
physics = S
anim = 220
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !Time
trigger1 = prevstateno=[200,240]
trigger2 = prevstateno=[400,440]
value = 220
elem = 3
ignorehitpause = 1
persistent = 0


[State 0, VelSet]
type=velset
trigger1=1
x=(4.3*sin(time*0.11));+3.0*(prevstateno=[200,240])+3.0*(prevstateno=[400,440])
y=(4.3*cos(time*0.11))-7.0*(prevstateno=[200,240])-7.0*(prevstateno=[400,440])
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelemtime(2)=0
trigger2 = animelemtime(4)=0
value = 0, 2

[State 200, snd]
type = playsnd
trigger1 = animelemtime(2)=0 && random<200
value = 3,20+random%4
channel = 0
volumescale = 300
persistent = 0

;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 200, 1] ;launcher if crouching
type = HitDef
trigger1 = animelem = 4
attr = C, NA
damage = ceil(cond(fvar(11) * 33 < 7, 7, fvar(11) * 33)), 0
animtype = Up
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 15,17 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound = s5, 2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -2,-13 ;-11-2.0*(prevstateno=[200,240])-2.0*(prevstateno=[400,440])
guard.velocity = -9
airguard.velocity = -2.5,-4.3
air.velocity = -4,-8
air.hittime = 12
air.animtype = back
fall = 1
getpower= 0,0
givepower = 0,0
yaccel = 0.5
ID = 1098
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(5)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = !animtime
trigger1 = prevstateno=[200,240]
trigger2 = prevstateno=[400,440]
x = 0
y = 0
ignorehitpause = 1
;persistent =

[State 240, ChangeState]
type = ChangeState
triggerall = !animtime
trigger1 = prevstateno=[200,240]
trigger2 = prevstateno=[400,440]
;trigger1 = pos y-var(3)=[-5,5]
;trigger2 = NumExplod(987654321)
;trigger2 = pos Y < var(3)
;trigger2 = AnimElemTime(3)>=0
;trigger3 = time>30
value = 0
ctrl = 1

[State 240, ChangeState]
type = ChangeState
triggerall = prevstateno!=[200,240]
triggerall = prevstateno!=[400,440]
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = NumExplod(987654321)
trigger2 = pos Y < var(3)
trigger2 = AnimElemTime(3)>=0
trigger3 = time>30
value = 0
ctrl = 1

; C. STRONG KICK
[Statedef 450]
type = C;S
movetype = A
physics = S
anim = 250
ctrl = 0
velset = 0,0
poweradd = 0
juggle = 7
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
;x=3*sin(time*0.11)
;y=-5*cos(time*0.09)
x=3.5*sin(time*0.08)
y=4*cos(time*0.1)
ignorehitpause=1
persistent=1


;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = AnimElem=2 ;1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 241, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 2
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,20+random%4
channel = 0
volumescale = 300
persistent = 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
animtype = Hard
damage = ceil(cond(fvar(11) * 55 < 7, 7, fvar(11) * 55)), 0
hitflag = MAF
guardflag = L
affectteam = E
pausetime = 13,17
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-50
hitsound   = s5,2
guardsound = s6,1
ground.type = Trip
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2,-3
guard.velocity = -9
air.velocity = -3,-1
guard.velocity = -3
down.velocity = -3,0
down.hittime = 20
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 255, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-5,5]
trigger2 = NumExplod(987654321)
trigger2 = pos Y < var(3)
trigger2 = AnimElemTime(3)>=0
trigger3 = time>30
value = 0
ctrl = 1

; J. LIGHT PUNCH
[Statedef 600]
type = A
movetype = A
physics = A
anim = 600
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4*sin(time*0.15)
ignorehitpause=1
persistent=1


;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 0
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,random%5
channel = 0
volumescale = 300
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno+9999)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno+9999
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y >=0
trigger1 = animelem = 2
attr = A, NA
animtype = Light
damage = ceil(cond(fvar(11) * 29 < 7, 7, fvar(11) * 29)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 14
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= 40, 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y <0
trigger1 = animelem = 2
attr = A, NA
animtype = Light
damage = ceil(cond(fvar(11) * 29 < 7, 7, fvar(11) * 29)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 14
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= 40, 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
;value = 0+50*((Pos Y - var(3))!=[-15,15])
value = 0+50*((Pos Y - var(3))<-15)
ctrl = 1

; J. MEDIUM PUNCH
[Statedef 610]
type = A
movetype = A
physics = A
anim = 610
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4*sin(time*0.12)
y=-1*cos(time*0.12)
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,10+random%4
channel = 0
volumescale = 300
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno+9999)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno+9999
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y >=0
trigger1 = animelem = 2
attr = A, NA
animtype = Medium
damage = ceil(cond(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 0 ;(NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y <0
trigger1 = animelem = 2
attr = A, NA
animtype = Medium
damage = ceil(cond(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 0 ;(NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 0, MP spam limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(999610)
trigger1 = !animtime
anim = 15999
ID = 999610
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
;value = 0+50*((Pos Y - var(3))!=[-15,15])
value = 0+50*((Pos Y - var(3))<-15)
ctrl = 1

; J. STRONG PUNCH
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4.3*sin(time*0.11)
y=4.3*cos(time*0.11)
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 2
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,20+random%4
channel = 0
volumescale = 300
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno+9999)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno+9999
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y >=0
trigger1 = animelem = 2
attr = A, NA
animtype = Hard
damage = ceil(cond(fvar(11) * 48 < 7, 7, fvar(11) * 48)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y <0
trigger1 = animelem = 2
attr = A, NA
animtype = Hard
damage = ceil(cond(fvar(11) * 48 < 7, 7, fvar(11) * 48)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -6;,2
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
;value = 0+50*((Pos Y - var(3))!=[-15,15])
value = 0+50*((Pos Y - var(3))<-15)
ctrl = 1

; J. LIGHT KICK
[Statedef 630]
type = A
movetype = A
physics = A
anim = 630
ctrl = 0
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4.3*sin(time*0.33)
y=6.4*sin(time*0.33)
ignorehitpause=1
persistent=1


;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 0
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,random%5
channel = 0
volumescale = 300
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno+9999)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno+9999
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y >=0
trigger1 = animelem = 2
attr = A, NA
animtype = Light
damage = ceil(cond(fvar(11) * 33 < 7, 7, fvar(11) * 33)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 14
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= 40, 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y <0
trigger1 = animelem = 2
attr = A, NA
animtype = Light
damage = ceil(cond(fvar(11) * 33 < 7, 7, fvar(11) * 33)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 10, 14
guard.pausetime = 10,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,0
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= 40, 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
;value = 0+50*((Pos Y - var(3))!=[-15,15])
value = 0+50*((Pos Y - var(3))<-15)
ctrl = 1

; J. MEDIUM KICK
[Statedef 640]
type = A
movetype = A
physics = A
ctrl = 0
anim = 640
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 0, VelSet]
type=velset
trigger1=1
x=4*sin(time*0.15)
y=3*cos(time)
ignorehitpause=1
persistent=1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,10+random%4
channel = 0
volumescale = 300
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno+9999)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno+9999
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y >=0
trigger1 = 1 ;animelem = 2
attr = A, NA
animtype = Medium
damage = ceil(cond(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 2

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y <0
trigger1 = 1 ;animelem = 2
attr = A, NA
animtype = Medium
damage = ceil(cond(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 11, 15
guard.pausetime = 11,11
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,1
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 2

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(4)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
;value = 0+50*((Pos Y - var(3))!=[-15,15])
value = 0+50*((Pos Y - var(3))<-15)
ctrl = 1

; J. STRONG KICK
[Statedef 650]
type = A
movetype = A
physics = N ;A
ctrl = 0
anim = 650
poweradd = 0
juggle = 2
hitcountpersist = 1
;movehitpersist = 1

[State 3000, Gravity]
type = Gravity
trigger1 =1

[State 0, VelSet] ;Not down
type = VelSet
triggerall = !NumExplod(90000002)
;triggerall = (NumExplod(90000009) || NumExplod(90000006) || NumExplod(90000003))
trigger1 = !time
x=3.5
y=-2
;ignorehitpause =
;persistent =

[State 0, VelSet] ;Down
type = VelSet
triggerall = NumExplod(90000002)
trigger1 = !time
x = 0.1
y = 10
;ignorehitpause =
;persistent =
[State 3000, PosFreeze]
type = PosFreeze
triggerall = NumExplod(90000002)
trigger1 = time = [1,5]
value = 1

[State 0, Projectile]
type = Projectile
triggerall = !NumProjID(651)
trigger1 = NumExplod(90000002)
ProjID = 651
projanim = 9999
projscale = 1,1
projremove = 0
projremovetime = 30
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0
pausemovetime = 0
;ignorehitpause =
;persistent =

[State 0, ChangeAnim] ;Down
type = ChangeAnim
trigger1 = NumProjID(651)
value = 650
elem = 2
ignorehitpause = 1
;persistent =


;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = 1 ;time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
ignorehitpause = 1
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1 ;AnimElem=2 ;1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 2
persistent = 0

[State 200, snd]
type = playsnd
trigger1 = animelem = 2 && random<200
value = 3,20+random%4
channel = 0
volumescale = 300
persistent = 0

[State -2, anti-fuzzy check]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(stateno+9999)
trigger1 = movecontact
trigger1 = numtarget
anim = 9999
ID = stateno+9999
pos = 0,0
postype = p1
removetime = abs(animtime)
removeongethit = 0
ignorehitpause = 1

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y >=0
trigger1 = animelem = 2
attr = A, NA
animtype = Hard
damage = ceil(cond(fvar(11) * 57 < 7, 7, fvar(11) * 57)), 0
guardflag = HA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,2
guardsound = S6,1
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 240, 2]
type = HitDef
triggerall = !NumExplod(stateno+9999) ;XGargoyle's anti fuzzy fix
triggerall = Vel Y <0
trigger1 = animelem = 2
attr = A, NA
animtype = Hard
damage = ceil(cond(fvar(11) * 57 < 7, 7, fvar(11) * 57)), 0
guardflag = MA
hitflag = MAF
affectteam = E
priority = 4, Hit
pausetime = 16, 20
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,2
guardsound = S6,2
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 0, basics limiter]
type = Explod
triggerall = !IsHelper
trigger1 = !NumExplod(987654321)
trigger1 = movehit
trigger1 = numtarget
anim = 15999
ID = 987654321
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 24
removeongethit = 0
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(3)>=0
value = 0
ignorehitpause = 1
;persistent =

[State 3002, Explod] ;crater
type = null;Explod
triggerall = NumHelper(90000005)
triggerall = NumProjID(651)
triggerall = !NumExplod(651)
trigger1 = pos y>-15
anim = 651
id = 651
postype=left
pos = floor(ScreenPos X), floor(Helper(90000005),screenpos Y)
facing = facing
velocity = 0, 0
accel = 0, 0
ontop = 0
scale = 0.5,0.5
shadow = -1,-1,-1
bindtime = 1
removetime = -2
removeongethit = 0
sprpriority = 9
ignorehitpause = 1
persistent = 0

[State 3002, Explod]
type = Explod
triggerall = NumHelper(90000005)
triggerall = NumProjID(651)
triggerall = !NumExplod(652)
trigger1 = pos y>-15
anim = 652
id = 652
postype=left
pos = floor(ScreenPos X), floor(Helper(90000005),screenpos Y)
velocity = 0, 0
accel = 0, 0
ontop = 0
scale = 0.5,0.5
bindtime = 1
removetime = -2
removeongethit = 0
sprpriority = 9
ignorehitpause = 1
persistent = 0

[State 3002, Explod]
type = Explod
triggerall = NumHelper(90000005)
triggerall = NumProjID(651)
triggerall = !NumExplod(653)
trigger1 = pos y>-15
anim = 653
id = 653
postype=left
pos = floor(ScreenPos X), floor(Helper(90000005),screenpos Y)
velocity = 0, 0
accel = 0, 0
ontop = 0
scale = 0.5,0.5
bindtime = 1
removetime = -2
removeongethit = 0
sprpriority = -9
ignorehitpause = 1
persistent = 0

[State 240, 1] ;crater sound
type = PlaySnd
trigger1 = NumExplod(652)
value = 3150,1
persistent = 0


[State 1400, EndState]
type = ChangeState
trigger1 = pos y>-15;!animtime
value = 0+50*((Pos Y - var(3))!=[-15,15])
;value = 0+50*((Pos Y - var(3))<-15)
ctrl = 1



;FWD Throw Attempt
[Statedef 800]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1
facep2 = 1
poweradd = 20

[State 0, VelSet]
type=velset
trigger1=1
;x=6*sin(time*0.15)
;y=8*sin(time*0.15)
x=4.3*sin(time*0.33)
y=4.4*cos(time*0.33)
ignorehitpause=1
persistent=1

;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
Trigger1 = time>1 ;1
fvar(16) = vel x ;
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
trigger1 = time>1 ;1
fvar(17) = vel y

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
;value = fvar(19)
value = -120+fvar(19)-180*(vel x<0)
scale = 1,1
ignorehitpause = 1
;persistent =


[State 800, Don't Guard]
type = attackdist
trigger1 = 1
value = 0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1

[State 800, hit]
type = hitdef
triggerall = p2bodydist x<35
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)=0 || enemy, AuthorName != "Team Z2";NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
[State 800, hit]
type = hitdef
triggerall = p2bodydist x<35
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)>0 ;NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
id = Cond((enemynear, NumExplod(98000000)),800,801);NEW

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = NumTarget;updated
trigger1 = !(target, ishelper);updated
trigger1 = MoveHit
value = Anim
elem = 4 ; change this to animelemno of grab you wish frozen
ignorehitpause = 1
;persistent = 0 ;AlexSin fix

[State 0, NotHitBy]
type = NotHitBy
trigger1 = MoveHit = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15

[State 0, TargetState]
type = TargetState
trigger1 = MoveHit =1
trigger1 = NumTarget(800)
trigger1 = target, StateNo != [800,899]
trigger1 = target, AuthorName = "Team Z2"
value = 899
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=2
trigger1 = NumTarget(800)
trigger1 = target, time<=5
trigger1 = target, StateNo = 5949
value = 5940
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=1
trigger1 = enemynear, StateNo = 950
value = 950
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = NumTarget(800)
trigger1 = target, time>=6
trigger1 = target, StateNo = 899
trigger2 = !NumTarget(800) || (NumTarget(800) && enemy, AuthorName != "Team Z2") ;AlexSin fix
trigger2 = MoveHit=1
value = 801
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I
ignorehitpause = 1
;persistent =

[State 200, missed voice]
type = PlaySnd
trigger1 = !numtarget
trigger1 = animelem = 4
value = 5000,0
channel = 0

[State Idle]
type = statetypeset
trigger1 = animelemtime(4)>=0
movetype = I

[State 230, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-8,8]
trigger2 = time>19
value = 0
ctrl = 1

;F.GRAB
[Statedef 801]
type = S
movetype = A
physics = S
anim = 801
ctrl = 0
sprpriority = 5

[State 801, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 240, 1] ;wosh
type = PlaySnd
trigger1 = !time
value = 1010, 0
persistent = 0

[state 1215, Smoke FX]
type = explod
trigger1 = time=2
anim = 807
id = 807
;pos = -15,10
;postype = P2
postype=left
pos = floor(ScreenPos X)-5*facing,floor(Helper(90000005),screenpos Y)
facing = -facing
sprpriority = 10
scale = 0.5,0.5
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1


[State 200, snd] ;"Alley oop!"
type = playsnd
trigger1 = time=5
value = 1010,50
channel = 0
volumescale = 300
persistent = 0

[State 801, Throw]
type = targetstate
trigger1 = !time
value = 805

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
fvar(13) = 2

[State 801, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, VelSet]
type=velset
trigger1=1
x=10*sin(time*0.23)
y=12*cos(time*0.33)
ignorehitpause=1
persistent=1

;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = 1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y 0]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Pos Y - Pos Y)!=0 ;prevent debug flood
trigger1 = 1
fvar(17) = (EnemyNear(0),Pos Y - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = 1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = VelSet
;trigger1 = time=1 ;
trigger1 = Anim=801
trigger1 = AnimelemTime(1)=0
x = 0.1+(Fvar(16)/fvar(18)) * 5.0
y = 0.1+(FVar(17)/fvar(18)) * 5.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------

[State 0, VarSet] ;angle
type = VarSet
;trigger1 = time>1 ;1
trigger1 = Anim=801
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = Anim=801
value = cond(facing=1,fvar(19),fvar(19)) ;WFT hack
scale = 1,1
ignorehitpause = 1
;persistent =
[State 241, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 2
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time>13
value = 802
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;F.GRAB Atomic Buster
[Statedef 802]
type = S
movetype = A
physics = S
anim = 802
ctrl = 0
sprpriority = 5
facep2 = 1

[State 801, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0.1
y = 0.1
;ignorehitpause =
;persistent =

;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = 1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y 0]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Pos Y - Pos Y)!=0 ;prevent debug flood
trigger1 = 1
fvar(17) = (EnemyNear(0),Pos Y - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = 1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = VelSet
trigger1 = time=6
x = 8 ;0.1+(Fvar(16)/fvar(18)) * 5.0
y = 8 ;0.1+(FVar(17)/fvar(18)) * 5.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------

[State 0, VarSet] ;angle
type = VarSet
triggerall = vel x!=0
trigger1 = time>=6
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time>=6
value = cond(facing=1,fvar(19),fvar(19)) ;WFT hack
scale = 1,1
ignorehitpause = 1
;persistent =

[State 240, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
animtype = Up
damage = ceil(cond(fvar(11) * 65 < 7, 7, fvar(11) * 65)), 0
guardflag = MA
hitflag = MAFD+
affectteam = E
priority = 4, Hit
pausetime = 1, 1
guard.pausetime = 16,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,0
hitsound   = s5,2
guardsound = S6,2
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4,-11
guard.velocity = -6
airguard.velocity = -2,-1.1
air.velocity = -4,-11
air.hittime = 12
air.animtype = back
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = (NumExplod(987654321) || prevstateno=600 || prevstateno=630 || NumExplod(52)=3)
nochainID = 1030
fall.envshake.ampl = id
persistent = 0

[State 801, bind]
type=targetbind
trigger1 = movehit
pos = 0,80
persistent = 0

[State 801, Hitting wall/ground sound effect]
type = PlaySnd
trigger1 = movehit
value = 15000, 2
persistent = 0

[State 801, Ground spark front]
type = Explod
trigger1 = movehit
anim = 8400
id = 8400
pos = -4, -10
postype = p2
sprpriority = 4
bindtime = 1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0
[State 801, Ground spark back]
type = Explod
trigger1 = movehit
anim = 8401
id = 8401
pos = -4, -10
postype = p2
sprpriority = -4
bindtime = 1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0

[State 801, EnvShake]
type = EnvShake
trigger1 = movehit
time = 8
ampl = -4
freq = 120
persistent = 0


[State 801, hurt]
type = poweradd
trigger1 = movehit
value = 180
persistent = 0

[State 1400, EndState]
type = ChangeState
trigger1 = pos y>-10 ;!animtime
value = 50
ctrl = 1

;F.Enemy Thrown State
[Statedef 805]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 0

[State 801, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = time=4 ;!time
value = 5070
;anim =
;ctrl =
;ignorehitpause = 0
;persistent = 1


; P2 Hit by Small Wire Attack (custom state)
[Statedef 803]
type = A
movetype = H
physics = N ;A
ctrl = 0
velset = 0,0
poweradd = 0
sprpriority = 2

[State 888, ChangeAnim]
type = ChangeAnim
trigger1 = !time && SelfAnimExist(5052)
value = 5052

[State 888, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time && !SelfAnimExist(5052)
value = 888

[State 888, Gravity]
type = Gravity
trigger1 = 1

[State 888, VelAdd]
type = VelSet
trigger1 = !Time
x = cond(P2Dist X>=0,-5,5) ;-10
y = -4

[State 888, NotHitBy]
type = null ;NotHitBy
trigger1 = 1
value = SCA

[State 888, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 888, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 889

[State 888, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;BACK Throw Attempt
[Statedef 810]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1
facep2 = 1
poweradd = 20

[State 0, VelSet]
type=velset
trigger1=1
x=4.3*sin(time*0.33)
y=4.4*cos(time*0.33)
ignorehitpause=1
persistent=1

;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
;value = fvar(19)
value = -120+fvar(19)-180*(vel x<0)
scale = 1,1
ignorehitpause = 1
;persistent =


[State 800, Don't Guard]
type = attackdist
trigger1 = 1
value = 0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 1

[State 800, hit]
type = hitdef
triggerall = p2bodydist x<35
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)=0 || enemy, AuthorName != "Team Z2";NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
[State 800, hit]
type = hitdef
triggerall = p2bodydist x<35
trigger1 = animelem=3 && !var(38)
trigger1 = Var(0)>0 ;NEW
attr = S,NT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
;p1stateno = 801
guard.dist = 0
fall = 1
fall.recover = 0
hitsound = s800,1
numhits = 0
id = Cond((enemynear, NumExplod(98000000)),800,801);NEW

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = NumTarget;updated
trigger1 = !(target, ishelper);updated
trigger1 = MoveHit
value = Anim
elem = 4 ; change this to animelemno of grab you wish frozen
ignorehitpause = 1
;persistent = 0 ;AlexSin fix

[State 0, NotHitBy]
type = NotHitBy
trigger1 = MoveHit = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15

[State 0, TargetState]
type = TargetState
trigger1 = MoveHit =1
trigger1 = NumTarget(800)
trigger1 = target, StateNo != [800,899]
trigger1 = target, AuthorName = "Team Z2"
value = 899
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=2
trigger1 = NumTarget(800)
trigger1 = target, time<=5
trigger1 = target, StateNo = 5949
value = 5940
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Var(0)=1
trigger1 = enemynear, StateNo = 950
value = 950
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = NumTarget(800)
trigger1 = target, time>=6
trigger1 = target, StateNo = 899
trigger2 = !NumTarget(800) || (NumTarget(800) && enemy, AuthorName != "Team Z2") ;AlexSin fix
trigger2 = MoveHit=1
value = 811
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I
ignorehitpause = 1
;persistent =

[State 200, missed voice]
type = PlaySnd
trigger1 = !numtarget
trigger1 = animelem = 4
value = 5000,0
channel = 0

[State Idle]
type = statetypeset
trigger1 = animelemtime(4)>=0
movetype = I

[State 230, ChangeState]
type = ChangeState
trigger1 = !animtime
trigger1 = pos y-var(3)=[-8,8]
trigger2 = time>19
value = 0
ctrl = 1


;B.GRAB
[Statedef 811]
type = S
movetype = A
physics = S
anim = 810
ctrl = 0
sprpriority = 5

[State 801, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 801, 1]
type = screenbound
trigger1 = 1
value = 1 ;0
movecamera = 0,0

[State 0, VelSet]
type=velset
trigger1=1
x=6.4*sin((19+animtime)*0.26)
y=-6.4*sin((19+animtime)*0.26)
ignorehitpause=1
persistent=1


;----------------------
;Aimed projectile, based on code made by Bea

;Finds the X component of the vector Player, EnemyNear
;Formula to find the components of a given vector AB
;V(x) = B(x) - A(x)
;V(y) = B(y) - A(y)
[State 1640, X]
Type = VarSet
triggerall = numenemy
triggerall = ((EnemyNear(0),Pos X - Pos X) * Facing)!=0 ;prevent debug flood
Trigger1 = time>1 ;1
fvar(16) = (EnemyNear(0),Pos X - Pos X) * Facing ;Adjust the direction towards player facing
;Finds the Y component of the vector Player, EnemyNear
[State 1640, Y]
Type = VarSet
triggerall = numenemy
triggerall = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)!=0 ;prevent debug flood
trigger1 = time>1 ;1
fvar(17) = (EnemyNear(0),Const(size.head.pos.y) - Pos Y)

;Finds the vector length
;Formula of the length of a given vector AB
;|AB| = (AB(x)^2  + AB(y)^2)^1/2
[State 1640, Vector Length 0]
Type = VarSet
trigger1 = time>1 ;1
fvar(18) = Exp(0.5*ln((fvar(16) * fvar(16))+(fvar(17) * fvar(17))))

[State 37001, Velocity 0]
type = Null; VelSet
trigger1 = 1 ;Time = 0
x = (Fvar(16)/fvar(18)) * 10.0
y = (FVar(17)/fvar(18)) * 10.0
;Normalizes the components
;and multiply by the desired absolute velocity.
;----------------------
[State 0, VarSet] ;angle
type = VarSet
trigger1 = time>1 ;1
fvar(19)= (180/pi)*atan((-1*(vel y))/vel x)
;ignorehitpause =
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = fvar(19)
scale = 1,1
ignorehitpause = 1
;persistent =

[State 801, sound] ;eat this!
type = PlaySnd
trigger1 = !time
value = 800,10
volumescale=255


[State 801, Throw]
type = targetstate
trigger1 = !time
value = 812

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
fvar(13) = 2

[State 801, hurt]
type = poweradd
trigger1 = !time
value = 180

[State 801, width]
type = width
trigger1 = anim = 810
value = 10,10 ;55,10

[State 801, TargetVelSet] ;stop
type = TargetVelSet
trigger1 = AnimelemTime(1)=0
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 801, bind]
type=targetbind
trigger1 = AnimelemTime(1)>=0 && AnimelemTime(2)<0
pos = 10,-10
[State 801, bind]
type=targetbind
trigger1 = AnimelemTime(2)>=0 && AnimelemTime(3)<0
pos = 5,-5
[State 801, bind]
type=null;targetbind
trigger1 = AnimelemTime(3)>=0 && AnimelemTime(3)<2
pos = 0,0

[State 801, TargetVelSet] ;fall
type = TargetVelSet
trigger1 = AnimelemTime(3)=0
x = 1
y = 3
;ignorehitpause =
;persistent =

[State 801, woosh sound]
type = PlaySnd
trigger1 = AnimelemTime(1)=0
value = 0,random%3

[State 801, Normal throw]
type = TargetLifeAdd
trigger1 = AnimelemTime(2)=0
value = -15

[State 801, HitAdd]
type = HitAdd
trigger1 = AnimelemTime(2)=0
value = 1
ignorehitpause = 1
;persistent =

[State 801, elbow hit spark]
type = Explod
trigger1 = AnimelemTime(2)=0
anim = 7010
id = 7010
pos = 5,-5
postype = p1
sprpriority = 10
bindtime = 1
scale = 1,1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 801, hit sound]
type = PlaySnd
trigger1 = AnimelemTime(2)=0
value = 5,random%3

[State 801, EnvShake]
type = EnvShake
trigger1 = AnimelemTime(2)=0
time = 8
ampl = -4
freq = 120

[State 801, TargetVelSet] ;last fall
type = TargetVelSet
trigger1 = time = 66
x = -1
y = -3
;ignorehitpause =
;persistent =

[State 801, EndState]
type = ChangeState
trigger1 = time = 72 ;100 ;!animtime
value = 50
ctrl = 1

;B.Enemy Thrown State
[Statedef 812]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 0
ignorehitpause = 1
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn
ignorehitpause = 1
;persistent =

[State 182, 1]
type = screenbound
trigger1 = 1
value = 0 ;1
movecamera = 1,0

[State 802, anim]
type = changeanim2
trigger1 = !time
value = 815

[State 0, Turn]
type = Turn
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
ignorehitpause = 1
;persistent =

[State 3002, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 12
ignorehitpause = 1
;persistent = 0

[State 0, PosAdd]
type = PosAdd
triggerall = time>72
trigger1 = !gethitvar(isbound)
x = 0
y = 90
;ignorehitpause =
;persistent =


[State 801, end]
type = selfstate
triggerall = time>72
trigger1 = !gethitvar(isbound)
value = 5050 ;5100
ctrl = 0


;----------------------------
;Enemy Grabbed
[Statedef 899]
type    = S
movetype= H
physics = N

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 899

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, ChangeState]
type = SelfState ;ChangeState ;AlexSin fix
trigger1 = ((NumExplod(90000800))|| (command = "x" && command = "a")) && command != "up"
value = Cond(enemynear,Var(0)=1,950,5940)

[State 0, ChangeState]
type = SelfState ;ChangeState
trigger1 = Time >= 6
value = 0
ctrl = 1
